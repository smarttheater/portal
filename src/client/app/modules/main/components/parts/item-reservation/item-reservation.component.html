<div class="bg-white p-3">
    <div class="">
        <app-item-event [screeningEvent]="reservation.typeOfGood.reservationFor"></app-item-event>
    </div>
    <hr class="border-dark-gray">
    <div class="mb-3">
        <p *ngIf="reservation.typeOfGood.reservedTicket.ticketedSeat?.seatNumber">
            {{ reservation.typeOfGood.reservedTicket.ticketedSeat?.seatNumber }}
        </p>
        <p *ngIf="price">{{ price | currency : 'JPY' }}</p>
        <ng-container *ngIf="priceComponents">
            <div *ngFor="let priceComponent of priceComponents" class="d-flex">
                <p>{{ priceComponent.name | changeLanguage }}</p>
                <p>&nbsp;/&nbsp;</p>
                <p>{{ priceComponent.price | currency : priceComponent.priceCurrency }}</p>
                <p *ngIf="priceComponent?.referenceQuantity?.value">
                    {{ 'common.referenceQuantityValue' | translate: { value: priceComponent?.referenceQuantity?.value }
                    }}
                </p>
            </div>
        </ng-container>
    </div>
    <div>
        <button type="button" class="btn btn-primary" (click)="openDetailModal(detailModal)">
            {{ 'common.detail' | translate }}
        </button>
    </div>
</div>

<ng-template #detailModal>
    <div class="p-4 scroll-vertical">
        <div class="">
            <app-item-event [screeningEvent]="reservation.typeOfGood.reservationFor"></app-item-event>
        </div>
        <hr class="border-dark-gray">
        <div class="">
            <p *ngIf="reservation.typeOfGood.reservedTicket.ticketedSeat?.seatNumber">
                {{ reservation.typeOfGood.reservedTicket.ticketedSeat?.seatNumber }}
            </p>
            <p *ngIf="price">{{ price | currency : 'JPY' }}</p>
            <ng-container *ngIf="priceComponents">
                <div *ngFor="let priceComponent of priceComponents" class="d-flex">
                    <p>{{ priceComponent.name | changeLanguage }}</p>
                    <p>&nbsp;/&nbsp;</p>
                    <p>{{ priceComponent.price | currency : priceComponent.priceCurrency }}</p>
                    <p *ngIf="priceComponent?.referenceQuantity?.value">
                        {{ 'common.referenceQuantityValue' | translate: { value:
                        priceComponent?.referenceQuantity?.value } }}
                    </p>
                </div>
            </ng-container>
        </div>
        <hr class="border-dark-gray">
        <div class="mb-3">
            <table class="table table-striped table-bordered text-small">
                <tbody>
                    <tr>
                        <td>{{ 'common.reservation.reservationNumber' | translate }}</td>
                        <td>{{ reservation.typeOfGood.reservationNumber }}</td>
                    </tr>
                    <tr>
                        <td>{{ 'common.reservation.bookingTime' | translate }}</td>
                        <td>{{ moment(reservation.typeOfGood.bookingTime).format('YYYY/MM/DD HH:mm') }}</td>
                    </tr>
                    <tr>
                        <td>{{ 'common.reservation.attended.label' | translate }}</td>
                        <td *ngIf="reservation.typeOfGood.attended">
                            {{ 'common.reservation.attended.true' | translate }}
                        </td>
                        <td *ngIf="!reservation.typeOfGood.attended">
                            {{ 'common.reservation.attended.false' | translate
                            }}
                        </td>
                    </tr>
                    <tr>
                        <td>{{ 'common.reservation.checkedIn.label' | translate }}</td>
                        <td *ngIf="reservation.typeOfGood.checkedIn">
                            {{ 'common.reservation.checkedIn.true' | translate }}
                        </td>
                        <td *ngIf="!reservation.typeOfGood.checkedIn">
                            {{ 'common.reservation.checkedIn.false' | translate }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <button *ngIf="modalRef" type="button" class="btn btn-outline-primary" (click)="modalRef?.hide()">
            {{ 'common.close' | translate }}
        </button>
    </div>
</ng-template>